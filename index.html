<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>SV Tillmitsch – Mathe-Trainer (1. Klasse Gym)</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 24px;
    max-width: 1000px;
    background: #111;
    color: #eee;
  }
  h1 {
    text-align: center;
    color: #d4af37;
    text-shadow: 1px 1px #000;
    margin-bottom: 5px;
  }
  h2 {
    margin-top: 32px;
    color: #ff7f00;
    border-bottom: 3px solid #d4af37;
    padding-bottom: 4px;
  }
  .section-note {
    font-size: 0.9em;
    color: #ccc;
    margin-bottom: 6px;
  }
  .section-box {
    margin-bottom: 24px;
    padding-bottom: 8px;
    border-bottom: 1px solid #333;
  }
  .card {
    border: 2px solid #d4af37;
    border-radius: 6px;
    margin: 10px 0;
    background: #1b1b1b;
  }
  .card-header {
    padding: 8px 10px;
    font-weight: bold;
  }
  .card-body {
    padding: 8px 10px;
    border-top: 1px solid #444;
  }
  textarea {
    width: 100%;
    min-height: 60px;
    margin-top: 6px;
    border: 1px solid #d4af37;
    padding: 4px;
    background: #000;
    color: #eee;
  }
  .solution {
    display: none;
    margin-top: 6px;
    padding: 8px;
    border-left: 4px solid #ff7f00;
    background: #333;
  }
  button {
    background: #ff7f00;
    color: #000;
    padding: 6px 12px;
    border: none;
    margin-top: 8px;
    margin-right: 6px;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
  }
  button:active {
    transform: scale(0.97);
  }
  img.logo {
    width: 180px;
    display: block;
    margin: 10px auto 25px auto;
  }

  /* ✔ Navigation-Button */
  a.nav-button {
    display: inline-block;
    background: #ff7f00;
    color: #000;
    padding: 6px 12px;
    border-radius: 4px;
    font-weight: bold;
    text-decoration: none;
    margin: 10px 0 18px 0;
  }
  a.nav-button:active {
    transform: scale(0.97);
  }

  .level-bar {
    margin: 12px 0 20px 0;
    padding: 10px;
    border: 1px solid #444;
    border-radius: 6px;
    background: #1b1b1b;
  }
  select {
    padding: 4px 8px;
    border-radius: 4px;
    border: 1px solid #d4af37;
    background: #000;
    color: #eee;
  }
</style>
</head>
<body>
<h1>SV Tillmitsch – Mathe-Trainer</h1>
<img src="logo.png" alt="SV Tillmitsch Logo" class="logo">

<!-- ✔ LINK ZUR TEXTAUFGABEN-SEITE -->
<p>
  <a class="nav-button" href="textaufgaben.html">
    Nur Textaufgaben (Schularbeitsvorbereitung)
  </a>
</p>

<p>
  <a class="nav-button" href="textaufgaben.html">
    Nur Textaufgaben (Schularbeitsvorbereitung)
  </a>
</p>
<p>
  <a class="nav-button" href="sa-generator.html">
    Schularbeit generieren
  </a>
</p>
  
<div class="level-bar">
  <strong>Schwierigkeitsgrad:</strong>
  <select id="levelSelect">
    <option value="standard">Standard (1. Klasse Gym)</option>
    <option value="advanced">Schwer</option>
  </select>
  <div style="font-size:0.85em;color:#ccc;margin-top:4px;">
    Level wählen und dann auf „Neue Aufgaben für dieses Kapitel“ klicken.
  </div>
</div>

<p>Für 1. Klasse Gymnasium. Pro Kapitel werden <b>20 zufällige Aufgaben</b> erzeugt.</p>

<div id="sections"></div>

<script>
  const TASKS_PER_SECTION = 20;
  let currentLevel = "standard";

  document.getElementById("levelSelect").addEventListener("change", function () {
    currentLevel = this.value;
    renderAllSections();
  });

  function randInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }
  function intToRoman(num) {
    const vals=[1000,900,500,400,100,90,50,40,10,9,5,4,1];
    const syms=["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];
    let res=""; for(let i=0;i<vals.length;i++){while(num>=vals[i]){num-=vals[i];res+=syms[i];}}
    return res;
  }
  function divisors(n){let r=[];for(let i=1;i<=n;i++){if(n%i===0)r.push(i);}return r;}
  function multiples(b,c){let r=[];for(let i=1;i<=c;i++)r.push(b*i);return r;}

  const generators = {
    "1.1": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        const n = (lvl==="advanced"?randInt(1000,999999):randInt(100,99999));
        t.push({q:"Vorgänger und Nachfolger von "+n, a:(n-1)+" / "+(n+1)});
      } return t;
    },
    "1.2": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        const typ=randInt(1,3);
        if(typ===1){
          const max=lvl==="advanced"?3999:2000;
          const n=randInt(10,max);
          t.push({q:n+" in römischen Zahlen",a:intToRoman(n)});
        } else if(typ===2){
          const max=lvl==="advanced"?3999:2000;
          const n=randInt(10,max), r=intToRoman(n);
          t.push({q:r+" als Zahl",a:""+n});
        } else {
          const n=lvl==="advanced"?randInt(100000,9999999):randInt(1000,999999);
          const s=n.toString(), len=s.length;
          if(lvl==="advanced"){
            const posNames=["Einer","Zehner","Hunderter","Tausender","Zehntausender","Hunderttausender","Millionen"];
            const pos=randInt(0,len-1), stelle=posNames[pos];
            t.push({q:"Welche Ziffer steht an der "+stelle+"-Stelle von "+n+"?",a:s[len-1-pos]});
          } else {
            const t1=Math.floor(n/1000), h=Math.floor((n%1000)/100), z=Math.floor((n%100)/10), e=n%10;
            t.push({q:n+" zerlegen (T/H/Z/E)",a:t1+" T, "+h+" H, "+z+" Z, "+e+" E"});
          }
        }
      } return t;
    },
    "1.3": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        if(randInt(1,2)===1){
          const a=lvl==="advanced"?randInt(10000,9999999):randInt(1000,99999);
          const b=lvl==="advanced"?randInt(10000,9999999):randInt(1000,99999);
          const sign=a>b?">":a<b?"<":"=";
          t.push({q:a+" __ "+b,a:sign});
        } else {
          const count=lvl==="advanced"?7:5;
          let arr=[]; const min=lvl==="advanced"?10000:1000, max=lvl==="advanced"?9999999:99999;
          for(let k=0;k<count;k++) arr.push(randInt(min,max));
          const sorted=arr.slice().sort((x,y)=>x-y);
          t.push({q:"Sortiere: "+arr.join(", "),a:sorted.join(", ")});
        }
      } return t;
    },
    "1.4": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        const mode=randInt(1,lvl==="advanced"?4:3); let n,a,q;
        if(mode===1){n=lvl==="advanced"?randInt(100,99999):randInt(0,9999);a=Math.round(n/10)*10;q="Runde "+n+" auf Zehner";}
        else if(mode===2){n=lvl==="advanced"?randInt(1000,999999):randInt(0,99999);a=Math.round(n/100)*100;q="Runde "+n+" auf Hunderter";}
        else if(mode===3){n=lvl==="advanced"?randInt(5000,999999):randInt(0,999999);a=Math.round(n/1000)*1000;q="Runde "+n+" auf Tausender";}
        else {n=randInt(10000,9999999);a=Math.round(n/10000)*10000;q="Runde "+n+" auf Zehntausender";}
        t.push({q,a:""+a});
      } return t;
    },
    "2.1": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        const typ=randInt(1,3); let q,res;
        if(typ===1){const a=randInt(100,5000),b=randInt(100,5000);q=a+" + "+b;res=a+b;}
        else if(typ===2){const a=lvl==="advanced"?randInt(1000,9000):randInt(500,5000),b=randInt(100,a-100),c=randInt(10,200);q="("+a+" - "+b+") + "+c;res=(a-b)+c;}
        else {const a=randInt(500,10000),b=randInt(100,a-100),c=randInt(50,b);q=a+" - ("+b+" - "+c+")";res=a-(b-c);}
        t.push({q,a:""+res});
      } return t;
    },
    "2.2": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        const typ=randInt(1,3);
        if(typ===1){
          const n=lvl==="advanced"?randInt(50,200):randInt(20,120);
          t.push({q:"Alle Teiler von "+n,a:divisors(n).join(", ")});
        } else if(typ===2){
          const b=lvl==="advanced"?randInt(7,20):randInt(3,12);
          t.push({q:"Erste 8 Vielfache von "+b,a:multiples(b,8).join(", ")});
        } else {
          const a=lvl==="advanced"?randInt(20,200):randInt(10,99);
          const b=lvl==="advanced"?randInt(10,30):randInt(2,12);
          if(Math.random()<0.5) t.push({q:a+"×"+b,a:""+(a*b)});
          else {
            const prod=a*b; t.push({q:prod+"÷"+a,a:""+b});
          }
        }
      } return t;
    },
    "2.3": lvl=>{
      const t=[]; for(let i=0;i<TASKS_PER_SECTION;i++){
        const typ=randInt(1,3); let q,res;
        if(typ===1){
          const a=randInt(50,400),b=randInt(5,20),c=randInt(10,50);
          q=a+" + "+b+"×"+c;res=a+b*c;
        } else if(typ===2){
          const a=randInt(200,900),b=randInt(2,9),c=randInt(10,50);
          q="("+a+"÷"+b+") + "+c;res=Math.floor(a/b)+c;
        } else {
          const a=randInt(20,80),b=randInt(5,15),c=randInt(10,100);
          q="("+a+"×"+b+") - "+c;res=a*b-c;
        }
        t.push({q,a:""+res});
      } return t;
    }
  };

  const sectionDefs = [
    { key:"1.1", title:"1.1 Zahlen & Zählen", note:"Vorgänger und Nachfolger großer Zahlen." },
    { key:"1.2", title:"1.2 Zahlensysteme", note:"Römische Zahlen & Stellenwerte." },
    { key:"1.3", title:"1.3 Zahlen ordnen", note:"Sortieren & Vergleichen." },
    { key:"1.4", title:"1.4 Runden", note:"Runden bis Zehntausender." },
    { key:"2.1", title:"2.1 Addieren & Subtrahieren", note:"Größere Zahlen & Klammern." },
    { key:"2.2", title:"2.2 Multiplizieren & Dividieren", note:"Produkte, Divisionen, Teiler, Vielfache." },
    { key:"2.3", title:"2.3 Verbundene Aufgaben", note:"Gemischte Rechnungen." }
  ];

  function renderAllSections(){
    const container=document.getElementById("sections");
    container.innerHTML="";

    sectionDefs.forEach(sec=>{
      const box=document.createElement("div");
      box.className="section-box";

      const h2=document.createElement("h2");
      h2.textContent=sec.title;
      box.appendChild(h2);

      const note=document.createElement("div");
      note.className="section-note";
      note.textContent=sec.note;
      box.appendChild(note);

      const btnNew=document.createElement("button");
      btnNew.textContent="Neue Aufgaben für dieses Kapitel";

      const tasksContainer=document.createElement("div");
      tasksContainer.className="tasks-container";

      btnNew.onclick=function(){renderTasksInto(sec.key,tasksContainer);};

      box.appendChild(btnNew);
      box.appendChild(tasksContainer);
      container.appendChild(box);

      renderTasksInto(sec.key,tasksContainer);
    });
  }

  function renderTasksInto(sectionKey, container){
    container.innerHTML="";
    const gen=generators[sectionKey];
    const tasks=gen(currentLevel);

    tasks.forEach(t=>{
      const card=document.createElement("div");
      card.className="card";

      const head=document.createElement("div");
      head.className="card-header";
      head.textContent=t.q;
      card.appendChild(head);

      const body=document.createElement("div");
      body.className="card-body";

      const label=document.createElement("div");
      label.textContent="Deine Lösung:";
      body.appendChild(label);

      const ta=document.createElement("textarea");
      body.appendChild(ta);

      const solDiv=document.createElement("div");
      solDiv.className="solution";
      solDiv.textContent=t.a;

      const btn=document.createElement("button");
      btn.type="button";
      btn.textContent="Lösung anzeigen";
      btn.onclick=function(){
        solDiv.style.display=solDiv.style.display==="block"?"none":"block";
      };

      body.appendChild(btn);
      body.appendChild(solDiv);
      card.appendChild(body);
      container.appendChild(card);
    });
  }

  renderAllSections();
</script>
</body>
</html>
