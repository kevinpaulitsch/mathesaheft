<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>SV Tillmitsch – Mathe-Trainer (Zufallsaufgaben)</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 24px;
    max-width: 1000px;
    background: #111;
    color: #eee;
  }
  h1 {
    text-align: center;
    color: #d4af37;
    text-shadow: 1px 1px #000;
    margin-bottom: 5px;
  }
  h2 {
    margin-top: 32px;
    color: #ff7f00;
    border-bottom: 3px solid #d4af37;
    padding-bottom: 4px;
  }
  .section-note {
    font-size: 0.9em;
    color: #ccc;
    margin-bottom: 6px;
  }
  .card {
    border: 2px solid #d4af37;
    border-radius: 6px;
    margin: 10px 0;
    background: #1b1b1b;
  }
  .card-header {
    padding: 8px 10px;
    font-weight: bold;
  }
  .card-body {
    padding: 8px 10px;
    border-top: 1px solid #444;
  }
  textarea {
    width: 100%;
    min-height: 60px;
    margin-top: 6px;
    border: 1px solid #d4af37;
    padding: 4px;
    background: #000;
    color: #eee;
  }
  .solution {
    display: none;
    margin-top: 6px;
    padding: 8px;
    border-left: 4px solid #ff7f00;
    background: #333;
  }
  button {
    background: #ff7f00;
    color: #000;
    padding: 6px 12px;
    border: none;
    margin-top: 8px;
    margin-right: 6px;
    border-radius: 4px;
    font-weight: bold;
    cursor: pointer;
  }
  button:active {
    transform: scale(0.97);
  }
  img.logo {
    width: 180px;
    display: block;
    margin: 10px auto 25px auto;
  }
</style>
</head>
<body>
<h1>SV Tillmitsch – Mathe-Trainer</h1>
<!-- Logo muss im Repo als logo.png liegen -->
<img src="logo.png" alt="SV Tillmitsch Logo" class="logo">
<p>Für 1. Klasse Gymnasium. Pro Kapitel bekommst du <b>20 zufällige Aufgaben</b>. Schreibe zuerst deine Lösung, dann klicke bei Bedarf auf „Lösung anzeigen“ oder „Neue Aufgaben“.</p>

<div id="sections"></div>

<script>
  const TASKS_PER_SECTION = 20; // Anzahl Aufgaben pro Kapitel

  // Hilfsfunktionen
  function randInt(min, max) {
    return Math.floor(Math.random() * (max - min + 1)) + min;
  }

  function intToRoman(num) {
    const vals = [1000,900,500,400,100,90,50,40,10,9,5,4,1];
    const syms = ["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"];
    let res = "";
    for (let i = 0; i < vals.length; i++) {
      while (num >= vals[i]) {
        num -= vals[i];
        res += syms[i];
      }
    }
    return res;
  }

  function divisors(n) {
    const res = [];
    for (let i = 1; i <= n; i++) {
      if (n % i === 0) res.push(i);
    }
    return res;
  }

  function multiples(base, count) {
    const res = [];
    for (let i = 1; i <= count; i++) res.push(base * i);
    return res;
  }

  // Generatoren für jede Kapitel-Art
  const generators = {
    "1.1": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const n = randInt(5, 999);
        const q = "Vorgänger und Nachfolger von " + n;
        const a = (n - 1) + " / " + (n + 1);
        tasks.push({q, a});
      }
      return tasks;
    },

    "1.2": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const typ = randInt(1,3);
        if (typ === 1) {
          // Arabisch -> Römisch
          const n = randInt(10, 3999);
          tasks.push({
            q: n + " in römischen Zahlen",
            a: intToRoman(n)
          });
        } else if (typ === 2) {
          // Römisch -> Arabisch
          const n = randInt(10, 3999);
          const r = intToRoman(n);
          tasks.push({
            q: r + " als Zahl",
            a: "" + n
          });
        } else {
          // Stellenwert
          const n = randInt(1000, 9999);
          const t = Math.floor(n / 1000);
          const h = Math.floor((n % 1000) / 100);
          const z = Math.floor((n % 100) / 10);
          const e = n % 10;
          tasks.push({
            q: n + " in Tausender/Hunderter/Zehner/Einer zerlegen",
            a: t + " T, " + h + " H, " + z + " Z, " + e + " E"
          });
        }
      }
      return tasks;
    },

    "1.3": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const typ = randInt(1,2);
        if (typ === 1) {
          // Vergleich
          const a = randInt(0, 9999);
          const b = randInt(0, 9999);
          let sign = "=";
          if (a > b) sign = ">";
          else if (a < b) sign = "<";
          tasks.push({
            q: a + " __ " + b,
            a: sign
          });
        } else {
          // Sortieren
          const arr = [randInt(0,9999), randInt(0,9999), randInt(0,9999), randInt(0,9999)];
          const sorted = arr.slice().sort((x,y)=>x-y);
          tasks.push({
            q: "Sortiere: " + arr.join(", "),
            a: sorted.join(", ")
          });
        }
      }
      return tasks;
    },

    "1.4": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const mode = randInt(1,3); // Zehner/Hunderter/Tausender
        let n, q, a;
        if (mode === 1) { // Zehner
          n = randInt(0, 999);
          const r = Math.round(n/10)*10;
          q = "Runde " + n + " auf Zehner";
          a = "" + r;
        } else if (mode === 2) { // Hunderter
          n = randInt(0, 9999);
          const r = Math.round(n/100)*100;
          q = "Runde " + n + " auf Hunderter";
          a = "" + r;
        } else { // Tausender
          n = randInt(0, 99999);
          const r = Math.round(n/1000)*1000;
          q = "Runde " + n + " auf Tausender";
          a = "" + r;
        }
        tasks.push({q, a});
      }
      return tasks;
    },

    "2.1": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const typ = randInt(1,3);
        let q, a;
        if (typ === 1) {
          const a1 = randInt(1,20), b = randInt(1,10), c = randInt(1,10);
          q = a1 + " + " + b + "×" + c;
          a = a1 + b*c;
        } else if (typ === 2) {
          const a1 = randInt(1,20), b = randInt(1,20);
          q = "(" + a1 + " + " + b + ")×2";
          a = (a1 + b)*2;
        } else {
          const a1 = randInt(10,50), b = randInt(1,20);
          const c = randInt(1,10);
          q = a1 + " - (" + b + " + " + c + ")";
          a = a1 - (b + c);
        }
        tasks.push({q, a: ""+a});
      }
      return tasks;
    },

    "2.2": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const typ = randInt(1,3);
        if (typ === 1) {
          const n = randInt(10, 50);
          tasks.push({
            q: "Alle Teiler von " + n,
            a: divisors(n).join(", ")
          });
        } else if (typ === 2) {
          const b = randInt(2, 12);
          tasks.push({
            q: "Erste 5 Vielfache von " + b,
            a: multiples(b,5).join(", ")
          });
        } else {
          const a1 = randInt(2,12), b = randInt(2,12);
          const op = randInt(1,2) === 1 ? "×" : "÷";
          let q,a;
          if (op === "×") {
            q = a1 + "×" + b;
            a = a1*b;
          } else {
            const prod = a1*b;
            q = prod + "÷" + a1;
            a = b;
          }
          tasks.push({q, a: ""+a});
        }
      }
      return tasks;
    },

    "2.3": function() {
      const tasks = [];
      for (let i = 0; i < TASKS_PER_SECTION; i++) {
        const typ = randInt(1,3);
        let q, res;
        if (typ === 1) {
          const a1 = randInt(5,20), b = randInt(2,10), c = randInt(2,10);
          q = a1 + "+ " + b + "×(" + c + ")";
          res = a1 + b*c;
        } else if (typ === 2) {
          const a1 = randInt(10,40), b = randInt(2,8), c = randInt(2,8);
          q = "(" + a1 + "÷" + b + ") + " + c;
          res = Math.floor(a1/b) + c;
        } else {
          const a1 = randInt(2,10), b = randInt(2,10), c = randInt(1,10);
          q = "(" + a1 + "×" + b + ") - " + c;
          res = a1*b - c;
        }
        tasks.push({q, a: ""+res});
      }
      return tasks;
    }
  };

  const sectionDefs = [
    { key: "1.1", title: "1.1 Zahlen & Zählen", note: "Vorgänger und Nachfolger." },
    { key: "1.2", title: "1.2 Zahlensysteme", note: "Römische Zahlen und Stellenwerte." },
    { key: "1.3", title: "1.3 Zahlen ordnen", note: "Vergleichen und sortieren." },
    { key: "1.4", title: "1.4 Runden", note: "Auf Zehner/Hunderter/Tausender runden." },
    { key: "2.1", title: "2.1 Addieren & Subtrahieren", note: "Klammern und Punkt-vor-Strich." },
    { key: "2.2", title: "2.2 Multiplizieren & Dividieren", note: "Teiler, Vielfache, × und ÷." },
    { key: "2.3", title: "2.3 Verbundene Aufgaben", note: "Gemischte Rechnungen." }
  ];

  function renderAllSections() {
    const container = document.getElementById("sections");
    container.innerHTML = "";

    sectionDefs.forEach((sec, idx) => {
      const h2 = document.createElement("h2");
      h2.textContent = sec.title;
      container.appendChild(h2);

      const note = document.createElement("div");
      note.className = "section-note";
      note.textContent = sec.note;
      container.appendChild(note);

      const btnNew = document.createElement("button");
      btnNew.textContent = "Neue Aufgaben für dieses Kapitel";
      btnNew.onclick = function () {
        renderSection(container, sec, idx, true);
      };
      container.appendChild(btnNew);

      renderSection(container, sec, idx, false);
    });
  }

  function renderSection(container, sec, idx, refreshOnly) {
    // alte Karten dieses Kapitels entfernen
    const old = Array.from(container.querySelectorAll("[data-section='" + sec.key + "']"));
    old.forEach(el => el.remove());

    const gen = generators[sec.key];
    if (!gen) return;
    const tasks = gen();

    tasks.forEach(t => {
      const card = document.createElement("div");
      card.className = "card";
      card.setAttribute("data-section", sec.key);

      const head = document.createElement("div");
      head.className = "card-header";
      head.textContent = t.q;
      card.appendChild(head);

      const body = document.createElement("div");
      body.className = "card-body";

      const label = document.createElement("div");
      label.textContent = "Deine Lösung:";
      body.appendChild(label);

      const ta = document.createElement("textarea");
      body.appendChild(ta);

      const solDiv = document.createElement("div");
      solDiv.className = "solution";
      solDiv.textContent = t.a;

      const btn = document.createElement("button");
      btn.type = "button";
      btn.textContent = "Lösung anzeigen";
      btn.onclick = function () {
        solDiv.style.display = solDiv.style.display === "block" ? "none" : "block";
      };

      body.appendChild(btn);
      body.appendChild(solDiv);
      card.appendChild(body);

      container.appendChild(card);
    });
  }

  // Initiales Rendern
  renderAllSections();
</script>
</body>
</html>
