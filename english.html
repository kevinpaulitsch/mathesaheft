<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>GB English Trainer – More! 1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="vocab.js"></script>
<style>
body{font-family:Arial;background:#eef2ff;padding:10px}
.card{max-width:420px;margin:auto;background:#fff;padding:20px;border-radius:12px}
button,select,input{width:100%;padding:12px;margin:6px 0;font-size:16px}
.correct{color:green}
.wrong{color:red}
</style>
</head>

<body>
<div class="card">
<h2>GB English Trainer – More! 1</h2>

<select id="unit"></select>

<button onclick="mode='trainer';start()">Trainer</button>
<button onclick="mode='test';start()">Test</button>

<hr>

<p id="question"></p>
<input id="answer" placeholder="Antwort eingeben">
<button onclick="check()">OK</button>

<p id="feedback"></p>
<p id="score"></p>
</div>

<script>
let words=[],current,score=0,asked=0,mode="trainer";

const unitSelect=document.getElementById("unit");
const q=document.getElementById("question");
const a=document.getElementById("answer");
const f=document.getElementById("feedback");
const s=document.getElementById("score");

// Dropdown füllen
let all=document.createElement("option");
all.value="all";
all.textContent="⭐ Alle Units gemischt";
unitSelect.appendChild(all);

for(let u in VOCAB){
  let o=document.createElement("option");
  o.value=u;
  o.textContent=VOCAB[u].title;
  unitSelect.appendChild(o);
}

function start(){
  score=0; asked=0;
  words=[];
  if(unitSelect.value==="all"){
    for(let u in VOCAB){ words=words.concat(VOCAB[u].words); }
  } else {
    words=[...VOCAB[unitSelect.value].words];
  }
  next();
}

function next(){
  current=words[Math.floor(Math.random()*words.length)];
  q.textContent="Übersetze: "+current.de;
  a.value="";
  f.textContent="";
}

function check(){
  asked++;
  if(a.value.trim().toLowerCase()===current.en.toLowerCase()){
    f.textContent="✔ Richtig";
    f.className="correct";
    score++;
    if(mode==="trainer") setTimeout(next,800);
    else if(asked>=10) endTest(); else next();
  } else {
    f.textContent="✖ Richtig wäre: "+current.en;
    f.className="wrong";
    if(mode==="trainer") setTimeout(next,1500);
    else if(asked>=10) endTest(); else next();
  }
  s.textContent="Punkte: "+score+" / "+asked;
}

function endTest(){
  q.textContent="Test beendet!";
  f.textContent="Ergebnis: "+score+" von "+asked;
}
</script>
</body>
</html>
