<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>GB English Trainer â€“ More! 1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:linear-gradient(135deg,#667eea,#764ba2);margin:0;padding:10px}
.box{max-width:500px;margin:20px auto;background:#fff;padding:25px;border-radius:15px}
h2{text-align:center;color:#667eea}
select,button,input{width:100%;padding:12px;margin:8px 0;font-size:16px}
button{background:#667eea;color:#fff;border:none;font-weight:bold}
.btn-test{background:#ff6b6b}
.btn-group{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.question{margin:20px 0;padding:20px;font-size:22px;background:#f8f9fa;border-radius:10px;text-align:center}
.mc{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.mc button{background:#4CAF50}
.hide{display:none}
.stats{display:flex;justify-content:space-between;margin-top:10px;font-weight:bold}
</style>
</head>

<body>
<div class="box">
<h2>ğŸ‡¬ğŸ‡§ GB English Trainer â€“ More! 1</h2>

<select id="unit">
<option value="all">Alle Units</option>
<option value="1">Unit 1</option><option value="2">Unit 2</option>
<option value="3">Unit 3</option><option value="4">Unit 4</option>
<option value="5">Unit 5</option><option value="6">Unit 6</option>
<option value="7">Unit 7</option>
</select>

<select id="direction">
<option value="de-en">Deutsch â†’ Englisch</option>
<option value="en-de">Englisch â†’ Deutsch</option>
<option value="mix">Gemischt</option>
</select>

<select id="mode">
<option value="write">Schreiben</option>
<option value="mc">Multiple Choice</option>
<option value="grammar">Grammatik</option>
</select>

<div class="btn-group">
<button onclick="start(false)">Trainer</button>
<button class="btn-test" onclick="start(true)">Test</button>
</div>

<div class="question" id="question">Start wÃ¤hlen</div>
<div class="mc" id="mc"></div>

<input id="answer" class="hide">
<button id="okBtn" class="hide" onclick="submit()">OK</button>

<div class="stats hide" id="stats">
<div>âœ… <span id="c">0</span></div>
<div>âŒ <span id="w">0</span></div>
</div>
</div>

<script src="vocab.js"></script>
<script src="grammar.js"></script>

<script>
let pool=[],cur=null,c=0,w=0;

function start(test){
  c=0;w=0;
  document.getElementById("stats").classList.remove("hide");
  const m=mode.value,u=unit.value;
  pool=m==="grammar"?getGrammarTasks(test?20:30)
      :getVocabForUnit(u).map(v=>({...v,type:"v"}));
  pool.sort(()=>Math.random()-0.5);
  next();
}

function next(){
  mc.innerHTML=""; answer.classList.add("hide"); okBtn.classList.add("hide");
  if(!pool.length){question.innerText="Fertig ğŸ‰";return;}
  cur=pool.shift();
  if(cur.q){
    question.innerText=cur.q;
    cur.options.forEach(o=>{
      const b=document.createElement("button");
      b.innerText=o; b.onclick=()=>check(o,cur.a);
      mc.appendChild(b);
    });
  }else{
    const d=direction.value==="mix"?(Math.random()<.5?"de-en":"en-de"):direction.value;
    const q=d==="de-en"?cur.de:cur.en;
    cur.a=d==="de-en"?cur.en:cur.de;
    question.innerText=q;
    answer.value=""; answer.classList.remove("hide");
    okBtn.classList.remove("hide");
  }
}

function submit(){check(answer.value.trim(),cur.a);}
function check(u,a){u===a?c++:w++;update();next();}
function update(){cEl.innerText=c;wEl.innerText=w;}
</script>
</body>
</html>
